<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Implement Feature Flag</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <div>
      <h3>How to implement feature flag functionality?</h3>
      <p>
        In this question, we need to implement a functionality that can be used
        to show different features to different users. It is commonly known as
        A/B testing. We need to build a common utility on frontend that can be
        used by the entire web-app to get the status of a feature flag. Assume
        that the BE is pre-built and a mock function is provided for it.
      </p>
      <h4>Functional Requirements</h4>
      <ul>
        <li>
          <code>getFeatureState</code> should return the value of the provided
          feature flag.
        </li>
        <li>
          In case, flag is missing in the response or there is an error, return
          the provided default value.
        </li>
        <li>
          <code>getFeatureState</code> should support caching with a ttl and
          minimize calls to backend APIs.
        </li>
      </ul>
      <h4>Syntax</h4>
      <code
        >getFeatureState(featureName: string, defaultValue: boolean):
        Promise:boolean
      </code>
      <h4>Argument</h4>
      <ul>
        <li>
          featureName (string): The name of the feature flag for which we need
          the status.
        </li>
        <li>
          defaultValue (boolean): The optional default value that would be
          returned by the utility function in case of error or as a fallback.
        </li>
      </ul>

      <h4>Return</h4>
      <ul>
        <li>
          A promise where then callback receives the feature flag value or the
          provided default value.
        </li>
      </ul>

      <h4>Example</h4>
      <pre>
        <code>
        getFeatureState("show-pricing-v2")
        .then(function(isEnabled) {
            if (isEnabled) {
            showPricingV2();
            } else {
            showOldPricing();
            }
        });

        getFeatureState("show-redesigned-dialog")
        .then(function(isEnabled) {
            if (isEnabled) {
            showRedesignedDialog();
            }
        });
    </code>
        </pre>
    </div>
  </body>
  <script src="./script.js"></script>
</html>
